# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased] - 2026-01-15

### Added
- **Pure Go SQLite Database Engine** - Complete replacement for external SQLite dependencies
  - Pager: Page cache, file I/O, journaling for ACID transactions
  - B-tree: Storage engine with read/write operations
  - Parser: Full SQL tokenizer and recursive descent parser
  - VDBE: Virtual Database Engine with 146 opcodes
  - Functions: 75+ built-in SQL functions (string, math, date/time, aggregates)
  - Query Planner: Cost-based optimization
  - Schema: sqlite_master table management
  - Driver: database/sql compatible interface

### Changed
- Replaced `modernc.org/sqlite` with internal pure Go implementation
- Moved optional CGO SQLite driver to `contrib/sqlite-external/`

### Removed
- External dependency on `modernc.org/sqlite` and its transitive dependencies
- External dependency on `github.com/mattn/go-sqlite3` (moved to contrib/)

### Technical Details
- 85+ Go source files
- 36,000+ lines of implementation code
- Based on SQLite 3.51.2 reference implementation
- Zero external dependencies for core functionality

## [0.1.0] - 2026-01-10

### Added

#### Core Infrastructure
- Content-addressed storage with SHA-256 (primary) and BLAKE3 (secondary) hashing
- Capsule pack/unpack in tar.xz format with gzip alternative
- Manifest generation with JSON schema validation
- NixOS VM execution harness for deterministic tool execution
- Plugin loader with format and tool plugin support
- Self-check engine with RoundTrip plans and SelfCheck reports
- Transcript capture in JSONL format

#### Format Plugins (40 bidirectional converters)
- **L0 Lossless**: osis, usfm, usx, zefania, theword, json
- **L1 Semantic**: esword, mysword, mybible, dbl, sqlite, markdown, html, epub, xml, odf, tei, morphgnt, oshb, sblgnt, sfm
- **L2 Structural**: sword, rtf, logos, accordance, onlinebible, flex, bibletime, crosswire, olive, ecm, na28app, tischendorf
- **L3 Text-primary**: txt, gobible, pdb
- **Archive**: file, zip, tar, dir

#### Tool Plugins (10)
- tool-libsword: SWORD module operations (list, render, mod2osis, osis2mod)
- tool-pandoc: Document format conversions (docx, odt, latex, html)
- tool-calibre: E-book format conversions (epub, mobi, azw3, pdf)
- tool-usfm2osis: USFM to OSIS XML conversion
- tool-sqlite: SQLite database operations
- tool-libxml2: XML validation and transformation (XSD, XSLT, XPath)
- tool-unrtf: RTF conversions
- tool-gobible-creator: GoBible J2ME packaging
- tool-repoman: SWORD repository management
- tool-hugo: Hugo JSON output generator

#### IR System (Intermediate Representation)
- Corpus, Document, ContentBlock types with stand-off markup
- Anchor and Span for overlapping annotations
- Ref type for verse references with OSIS ID support
- 17 versification systems (KJV, NRSV, LXX, Vulgate, Catholic, MT, Luther, Synodal, German, Armenian, Georgian, Slavonic, Syriac, Arabic, DSS, Samaritan, BHS, NA28)
- Cross-reference extraction and indexing
- Parallel corpus alignment (verse, sentence, word levels)
- Loss tracking with L0-L4 classification

#### CLI Commands (25+)
- Capsule operations: ingest, export, verify, selfcheck
- Plugin management: plugins, detect, enumerate
- IR operations: extract-ir, emit-native, convert, ir-info
- Run management: run, runs, compare, golden
- Tool operations: tool-run, tool-archive, tool-list
- Server commands: web, api
- Utilities: docgen

#### Web UI
- Capsule browser with artifact listing
- Bible reader with chapter navigation and search
- IR visualization with JSON tree view
- Format conversion interface
- Plugin listing and management
- Light/dark mode toggle

#### REST API
- OpenAPI 3.0 specification
- CORS support
- Standard response wrapper
- Endpoints for capsules, plugins, formats, conversion

#### Security
- Path traversal protection
- Input validation framework
- WebSocket security (origin validation, rate limiting)
- CSRF token protection
- Secure temp file handling

#### Code Quality
- 2,500+ tests passing
- 80%+ coverage for core packages
- Type-safe error handling
- Structured slog-based logging
- Plugin versioning with semantic constraints

#### Sample Data
- 11 complete Bible modules for testing (ASV, DRC, Geneva1599, KJV, LXX, OEB, OSMHB, SBLGNT, Tyndale, Vulgate, WEB)

#### Documentation
- PROJECT_CHARTER.md - System specification
- PLUGIN_DEVELOPMENT.md - Plugin authoring guide
- IR_IMPLEMENTATION.md - IR system documentation
- TDD_WORKFLOW.md - Test-driven development guide
- BUILD_MODES.md - SQLite driver selection
- VERSIFICATION.md - Versification systems
- OpenAPI specification for REST API

[0.1.0]: https://github.com/FocuswithJustin/JuniperBible/releases/tag/v0.1.0
